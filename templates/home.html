<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href={{ url_for('static', filename='/img/favicon.ico') }}>
    <title>REST API Example</title>
    <link rel="stylesheet" href={{ url_for('static', filename='css/stylesheet.css') }}>
    <link rel="stylesheet" href= "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.css">
</head>
<body>
  <section id="main">
  <div class="container tab-section">
  <article>
    <h2>
        Example REST API with ORM
    </h2>
    <p> Created by Martin Zirulnik: <a class="text-link" href="https://mziru.com" target="_blank">https://mziru.com</a>
    <br> Code and more info: <a class="text-link" href="https://github.com/mziru/web-api-example" target="_blank">https://github.com/mziru/web-api-example</a></br>
    </p>
    <p>
        This is a basic homepage for an example web API with create, read, update, and delete (CRUD) operations, built as a
        foundation for developing more complex database interfaces in Python. The sample database stores fictional
        people and Covid-19 test results, which have a one-to-many relationship.
    </p>
      <div><a class="text-link" href="/covid_api/ui" target="_blank">swagger_ui</a> - see documentation and test API endpoints </div>
      <div><a class="text-link" href="/covid_api/people" target="_blank">people_data</a> - see full json response data for People </div>
      <div><a class="text-link" href="/covid_api/results" target="_blank">results_data</a> - see full json response data for Results </div>
  <h3>
        Database Content Summary
  </h3>
   <details>
   <summary> Click to see a summary of all current records.
   <span class="icon"><i class="fa fa-angle-down"></i></span></summary></summary>
    <div>
       <ul>
        {% for person in people %}
        <li>
            <span>

                {{ person.name }}{{ " has " }}{{ person.results|length }}{{ " result(s) on record. "}}
                <br>{{ "Current status: "}}
                {% if person.covid_positive == False %}
                    {{ "NEGATIVE" }}
                {% else %}
                    {{ "POSITIVE" }}
                {% endif %}
                <br>{{ "Updated: " }}{{ person.timestamp }}
            </span>
        </li>
        <br>
        {% endfor %}
    </ul>
    </div>
   </details>
  </article>
  </div>
  </section>
</body>
</html>